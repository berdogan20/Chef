{"ast":null,"code":"import { Validators } from '@angular/forms';\nimport { v4 as uuidv4 } from 'uuid';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nimport * as i2 from \"../auth/auth.service\";\nimport * as i3 from \"../api/services\";\nimport * as i4 from \"@angular/forms\";\nfunction CreateFoodComponent_option_20_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"option\", 26);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const category_r2 = ctx.$implicit;\n    i0.ɵɵproperty(\"value\", category_r2.id);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", category_r2.name, \" \");\n  }\n}\nexport class CreateFoodComponent {\n  constructor(route, router, authService, foodService, orderService, formBuilder, categoryService) {\n    this.route = route;\n    this.router = router;\n    this.authService = authService;\n    this.foodService = foodService;\n    this.orderService = orderService;\n    this.formBuilder = formBuilder;\n    this.categoryService = categoryService;\n    this.foodId = 'not loaded';\n    this.food = {};\n    this.categories = [];\n    this.handleError = err => {\n      if (err.status == 404) {\n        alert(\"Food not found!\");\n        this.router.navigate(['/menu']);\n      }\n      if (err.status == 409) {\n        console.log(\"err: \" + err);\n        alert(JSON.parse(err.error).message);\n      }\n      console.log(\"Response Error. Status: \", err.status);\n      console.log(\"Response Error. Status Text: \", err.statusText);\n      console.log(err);\n    };\n  }\n  ngOnInit() {\n    this.form = this.formBuilder.group({\n      imageUrl: ['', Validators.required],\n      categoryId: ['', Validators.required],\n      name: ['', Validators.required],\n      description: ['', Validators.required],\n      price: ['', Validators.required],\n      preperationTime: ['', Validators.required]\n    });\n    this.getCategories();\n  }\n  createFood() {\n    console.log(this.form);\n    let dto = {\n      categoryId: this.form.value.categoryId,\n      description: this.form.value.description,\n      id: uuidv4(),\n      imageUrl: this.form.value.imageUrl,\n      name: this.form.value.name,\n      preperationTime: Number(this.form.value.preperationTime),\n      price: Number(this.form.value.price)\n    };\n    console.log(dto);\n    this.foodService.createFood({\n      body: dto\n    }).subscribe(_ => {\n      this.router.navigate(['/menu']);\n    }, err => this.handleError(err));\n  }\n  cancel() {}\n  getCategories() {\n    this.categoryService.getAllCategoriesCategory().subscribe(rmList => this.categories = rmList, err => this.handleError(err));\n  }\n}\nCreateFoodComponent.ɵfac = function CreateFoodComponent_Factory(t) {\n  return new (t || CreateFoodComponent)(i0.ɵɵdirectiveInject(i1.ActivatedRoute), i0.ɵɵdirectiveInject(i1.Router), i0.ɵɵdirectiveInject(i2.AuthService), i0.ɵɵdirectiveInject(i3.FoodService), i0.ɵɵdirectiveInject(i3.OrderService), i0.ɵɵdirectiveInject(i4.FormBuilder), i0.ɵɵdirectiveInject(i3.CategoryService));\n};\nCreateFoodComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: CreateFoodComponent,\n  selectors: [[\"app-create-food\"]],\n  decls: 43,\n  vars: 3,\n  consts: [[1, \"container\"], [3, \"formGroup\"], [1, \"card\", \"mb-3\", 2, \"max-width\", \"100%\"], [1, \"row\"], [1, \"col-md-4\"], [1, \"form-group\"], [\"for\", \"imagePath\"], [\"type\", \"text\", \"id\", \"imagePath\", \"formControlName\", \"imageUrl\", 1, \"form-control\"], [\"imageUrl\", \"\"], [1, \"img-responsive\", 3, \"src\"], [1, \"col-md-8\"], [1, \"card-body\"], [\"for\", \"categoryId\"], [\"formControlName\", \"categoryId\", \"id\", \"categoryId\", \"required\", \"\", 1, \"form-select\", \"form-select-sm\"], [\"disabled\", \"\", \"selected\", \"\"], [3, \"value\", 4, \"ngFor\", \"ngForOf\"], [\"for\", \"name\"], [\"type\", \"text\", \"id\", \"name\", \"formControlName\", \"name\", \"required\", \"\", 1, \"form-control\"], [\"for\", \"description\"], [\"type\", \"text\", \"id\", \"description\", \"formControlName\", \"description\", \"required\", \"\", 1, \"form-control\"], [\"for\", \"price\"], [\"formControlName\", \"price\", \"type\", \"number\", \"id\", \"price\", \"name\", \"price\", \"required\", \"\", 1, \"form-control\", 2, \"max-width\", \"30%\"], [\"for\", \"preperationTime\"], [\"formControlName\", \"preperationTime\", \"type\", \"number\", \"id\", \"preperationTime\", \"name\", \"preperationTime\", 1, \"form-control\", 2, \"max-width\", \"30%\"], [\"type\", \"submit\", 1, \"btn\", 3, \"click\"], [\"type\", \"button\", 1, \"btn\", \"delete-button\", 3, \"click\"], [3, \"value\"]],\n  template: function CreateFoodComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"div\", 0)(1, \"form\", 1)(2, \"div\", 2)(3, \"div\", 3)(4, \"div\", 4)(5, \"div\", 5)(6, \"label\", 6);\n      i0.ɵɵtext(7, \"Image URL\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(8, \"input\", 7, 8);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(10, \"div\", 3);\n      i0.ɵɵelement(11, \"img\", 9);\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(12, \"div\", 10)(13, \"div\", 11)(14, \"div\", 5)(15, \"label\", 12);\n      i0.ɵɵtext(16, \"Category\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(17, \"select\", 13)(18, \"option\", 14);\n      i0.ɵɵtext(19, \"Open this select menu\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtemplate(20, CreateFoodComponent_option_20_Template, 2, 2, \"option\", 15);\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(21, \"div\", 5)(22, \"label\", 16);\n      i0.ɵɵtext(23, \"Name\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(24, \"input\", 17);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(25, \"div\", 5)(26, \"label\", 18);\n      i0.ɵɵtext(27, \"Description\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(28, \"textarea\", 19);\n      i0.ɵɵtext(29, \"\\n                        \");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(30, \"div\", 5)(31, \"label\", 20);\n      i0.ɵɵtext(32, \"Price\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(33, \"input\", 21);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(34, \"div\", 5)(35, \"label\", 22);\n      i0.ɵɵtext(36, \"Preperation Time\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(37, \"input\", 23);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(38, \"br\");\n      i0.ɵɵelementStart(39, \"button\", 24);\n      i0.ɵɵlistener(\"click\", function CreateFoodComponent_Template_button_click_39_listener() {\n        return ctx.createFood();\n      });\n      i0.ɵɵtext(40, \"Submit\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(41, \"button\", 25);\n      i0.ɵɵlistener(\"click\", function CreateFoodComponent_Template_button_click_41_listener() {\n        return ctx.cancel();\n      });\n      i0.ɵɵtext(42, \"Cancel\");\n      i0.ɵɵelementEnd()()()()()()();\n    }\n    if (rf & 2) {\n      const _r0 = i0.ɵɵreference(9);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"formGroup\", ctx.form);\n      i0.ɵɵadvance(10);\n      i0.ɵɵproperty(\"src\", _r0.value, i0.ɵɵsanitizeUrl);\n      i0.ɵɵadvance(9);\n      i0.ɵɵproperty(\"ngForOf\", ctx.categories);\n    }\n  },\n  styles: [\"\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsInNvdXJjZVJvb3QiOiIifQ== */\"]\n});","map":{"version":3,"mappings":"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","names":["Validators","v4","uuidv4","i0","CreateFoodComponent","constructor","route","router","authService","foodService","orderService","formBuilder","categoryService","err","status","alert","navigate","console","log","JSON","parse","error","message","statusText","ngOnInit","form","group","imageUrl","required","categoryId","name","description","price","preperationTime","getCategories","createFood","dto","value","id","Number","body","subscribe","_","handleError","cancel","getAllCategoriesCategory","rmList","categories","selectors","decls","vars","consts","template","ctx"],"sourceRoot":"","sources":["/Users/beyzaerdogan/Desktop/Chef/Chef/ClientApp/src/app/create-food/create-food.component.ts","/Users/beyzaerdogan/Desktop/Chef/Chef/ClientApp/src/app/create-food/create-food.component.html"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\nimport { CategoryService, FoodService, OrderService } from '../api/services';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport { FoodRm, OrderDto, FoodDto, CategoryRm } from '../api/models';\nimport { FormBuilder, Validators, FormGroup } from '@angular/forms';\nimport { AuthService } from '../auth/auth.service';\nimport { v4 as uuidv4 } from 'uuid';\n\n\n@Component({\n  selector: 'app-create-food',\n  templateUrl: './create-food.component.html',\n  styleUrls: ['./create-food.component.css']\n})\nexport class CreateFoodComponent {\n\n  foodId: string = 'not loaded';\n  food: FoodRm = {};\n  categories: CategoryRm[] = [];\n\n  form!: FormGroup;\n\n  constructor(private route: ActivatedRoute,\n    private router: Router,\n    private authService: AuthService,\n    private foodService: FoodService,\n    private orderService: OrderService,\n    private formBuilder: FormBuilder,\n    private categoryService: CategoryService) { }\n\n\n  ngOnInit(): void {\n\n    this.form = this.formBuilder.group({\n      imageUrl: ['', Validators.required],\n      categoryId: ['', Validators.required],\n      name: ['', Validators.required],\n      description: ['', Validators.required],\n      price: ['', Validators.required],\n      preperationTime: ['', Validators.required]\n    });\n\n    this.getCategories();\n  }\n\n  createFood() {\n    console.log(this.form);\n\n    let dto: FoodDto = {\n      categoryId: this.form.value.categoryId,\n      description: this.form.value.description,\n      id: uuidv4(),\n      imageUrl: this.form.value.imageUrl,\n      name: this.form.value.name,\n      preperationTime: Number(this.form.value.preperationTime),\n      price: Number(this.form.value.price)\n    }\n\n    console.log(dto);\n\n    this.foodService.createFood({ body: dto })\n      .subscribe(_ => {\n        this.router.navigate(['/menu']);\n      },\n        err => this.handleError(err));\n\n    \n  }\n\n\n  cancel() {\n\n  }\n\n\n  private handleError = (err: any) => {\n\n    if (err.status == 404) {\n      alert(\"Food not found!\")\n      this.router.navigate(['/menu'])\n    }\n\n\n    if (err.status == 409) {\n      console.log(\"err: \" + err);\n      alert(JSON.parse(err.error).message)\n    }\n\n    console.log(\"Response Error. Status: \", err.status)\n    console.log(\"Response Error. Status Text: \", err.statusText)\n    console.log(err)\n  }\n\n  getCategories() {\n    this.categoryService.getAllCategoriesCategory()\n      .subscribe(rmList => this.categories = rmList,\n        err => this.handleError(err));\n  }\n}\n","\n<div class=\"container\">\n    <form [formGroup]=\"form\">\n        <div class=\"card mb-3\" style=\"max-width: 100%;\">\n            <div class=\"row\">\n                <!--food image-->\n                <div class=\"col-md-4\">\n                    <div class=\"form-group\">\n                        <label for=\"imagePath\">Image URL</label>\n                        <input type=\"text\"\n                               id=\"imagePath\"\n                               formControlName=\"imageUrl\"\n                               class=\"form-control\"\n                               #imageUrl>\n                    </div>\n                    <div class=\"row\">\n                        <img [src]=\"imageUrl.value\" class=\"img-responsive\">\n                    </div>\n                </div>\n\n\n                <!--food information-->\n                <div class=\"col-md-8\">\n\n                    <div class=\"card-body\">\n\n                        <!--category-->\n                        <div class=\"form-group\">\n                            <label for=\"categoryId\">Category</label>\n                            <select class=\"form-select form-select-sm\" formControlName=\"categoryId\" id=\"categoryId\" required>\n                                <option disabled selected>Open this select menu</option>\n                                <option *ngFor=\"let category of categories\"\n                                        [value]=\"category.id\"> {{ category.name }}\n                                </option>\n                            </select>\n                        </div>\n                        <!--name-->\n                        <div class=\"form-group\">\n                            <label for=\"name\">Name</label>\n                            <input type=\"text\"\n                                   class=\"form-control\"\n                                   id=\"name\"\n                                   formControlName=\"name\"\n                                   required>\n                        </div>\n                        <!--description-->\n                        <div class=\"form-group\">\n                            <label for=\"description\">Description</label>\n                            <textarea type=\"text\"\n                                      class=\"form-control\"\n                                      id=\"description\"\n                                      formControlName=\"description\"\n                                      required>\n\n                        </textarea>\n                        </div>\n                        <!--price-->\n                        <div class=\"form-group\">\n                            <label for=\"price\">Price</label>\n                            <input formControlName=\"price\"\n                                   type=\"number\" class=\"form-control\"\n                                   id=\"price\" name=\"price\"\n                                   style=\"max-width: 30%;\"\n                                   required />\n                        </div>\n                        <!--preperationTime-->\n                        <div class=\"form-group\">\n                            <label for=\"preperationTime\">Preperation Time</label>\n                            <input formControlName=\"preperationTime\"\n                                   type=\"number\" class=\"form-control\"\n                                   id=\"preperationTime\" name=\"preperationTime\"\n                                   style=\"max-width: 30%;\" />\n                        </div>\n                        <!--submit button-->\n                        <br />\n                        <button (click)=\"createFood()\" type=\"submit\" class=\"btn\">Submit</button>\n                        <!--remove button-->\n                        <button (click)=\"cancel()\" type=\"button\" class=\"btn delete-button\">Cancel</button>\n                    </div>\n\n\n                </div>\n\n            </div>\n        </div>\n    </form>\n</div>\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}